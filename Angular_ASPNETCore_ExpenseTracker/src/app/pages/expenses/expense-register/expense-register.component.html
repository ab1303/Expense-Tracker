<div id="content_wrapper"
     class="fullWidth2-wrapper rightSidenav2-wrapper">
	<mat-sidenav-container class="sidenav-container">
		<mat-sidenav-content>
			<div class="content">
				<div class="header-wrapper header-sm">
					<header>
						<h1>Expense Register</h1>

						<ul class="actions icons top-right">
							<li>
								<a href="javascript:void(0)"
								   (click)="rightSidenav2.toggle()">
									<i class="zmdi zmdi-search"></i>
								</a>
							</li>
						</ul>
					</header>
				</div>
				<div class="content-body">
					<div class="card card-datatable">
						<div class="selected-toolbar"
						     [ngClass]="{'active' : isToolbarActive}">
							<mat-toolbar class="activeHeaderColor">
								<span>{{itemCount}} {{itemsSelected}}</span>
								<span class="demo-fill-remaining"></span>
								<button mat-icon-button>
									<mat-icon class="mat-24">delete</mat-icon>
								</button>
							</mat-toolbar>
						</div>
						<div [ngClass]="{'p-t-50' : isToolbarActive}"></div>
						<header class="card-header p-30">
							<h2 class="card-title">Expense Register</h2>
							<ul class="actions icons top-right">
								<li class="dropdown"
								    dropdown>
									<a href="javascript:void(0)"
									   dropdownToggle>
										<i class="zmdi zmdi-more-vert"></i>
									</a>
									<ul class="dropdown-menu btn-primary dropdown-menu-right">
										<li>
											<!-- <button class="btn btn-info btn-block"
											        (click)="updateTransactionModal.show()">Edit Category</button> -->
											<button class="btn btn-info btn-block"
											        (click)="openDialog()">Edit Category</button>
										</li>
									</ul>
								</li>
							</ul>
							<ul class="actions fab bottom-right">
								<li>
									<button class="btn btn-accent btn-fab"
									        mat-ripple>
										<i class="zmdi zmdi-plus"></i>
									</button>
								</li>
							</ul>
						</header>
						<div class="card-block p-0">
							<ngx-datatable #table
							               style="width: 100%"
							               class="material"
							               [rows]="rows"
							               [columnMode]="'force'"
							               [headerHeight]="50"
							               [footerHeight]="50"
							               [rowHeight]="'auto'"
							               [limit]="10"
							               [selected]="selected"
							               [selectionType]="'checkbox'"
							               [externalPaging]="true"
							               [count]="page.totalElements"
							               [offset]="page.pageNumber"
							               [limit]="page.size"
							               (page)='setPage($event)'
							               (select)='onSelect($event)'>
								<ngx-datatable-column [width]="60"
								                      [sortable]="false"
								                      [canAutoResize]="false"
								                      [draggable]="false"
								                      [resizeable]="false">
									<ng-template ngx-datatable-header-template
									             let-value="value"
									             let-allRowsSelected="allRowsSelected"
									             let-selectFn="selectFn">
										<mat-checkbox class="example-margin"
										              [checked]="allRowsSelected"
										              (change)="selectFn(!allRowsSelected)"></mat-checkbox>
									</ng-template>
									<ng-template ngx-datatable-cell-template
									             let-value="value"
									             let-isSelected="isSelected"
									             let-onCheckboxChangeFn="onCheckboxChangeFn">
										<mat-checkbox class="example-margin"
										              [checked]="isSelected"
										              (change)="onCheckboxChangeFn($event)"></mat-checkbox>
									</ng-template>
								</ngx-datatable-column>
								<ngx-datatable-column name="Name"></ngx-datatable-column>
								<ngx-datatable-column name="Category"
								                      prop="categoryName"></ngx-datatable-column>
								<ngx-datatable-column name="Amount">
									<ng-template let-value="value"
									             ngx-datatable-cell-template>
										{{value | currency:'USD':'symbol':'1.2-4'}}
									</ng-template>
								</ngx-datatable-column>
								<ngx-datatable-column name="Paid For"
								                      prop="paidForName"></ngx-datatable-column>
								<ngx-datatable-column name="Transaction Date">
									<ng-template let-value="value"
									             ngx-datatable-cell-template>
										{{value | date: 'dd-MMM-yyyy'}}
									</ng-template>
								</ngx-datatable-column>
								<ngx-datatable-column name="Edit">
									<ng-template let-row="row"
									             ngx-datatable-cell-template>
										<a href="javascript:void(0)"
										   attr.data-productId="{{row.productId}}"
										   class="icon edit-product">
											<i class="zmdi zmdi-edit"></i>
										</a>
									</ng-template>
								</ngx-datatable-column>
							</ngx-datatable>
						</div>
					</div>
				</div>
			</div>
		</mat-sidenav-content>
		<!-- Sidenav -->
		<mat-sidenav #rightSidenav2
		             mode="{{navMode}}"
		             align="end"
		             class="sidenav">
			<aside id="rightSidenav2">
				<app-search-card (searchHandler)="search($event)"
				                 (resetHandler)="clearFilter($event)">
					<input type="text"
					       placeholder="Expense Name..."
					       class="form-control" />
					<input matInput
					       placeholder="Expense Category"
					       class="form-control"
					       [matAutocomplete]="tdAuto"
					       [formControl]="expenseCategoryControl">
				</app-search-card>
			</aside>
		</mat-sidenav>

		<!-- Auto Complete Expense Categories -->
		<mat-autocomplete #tdAuto="matAutocomplete"
		                  [displayWith]="displayFn">
			<mat-option *ngFor="let expenseCategory of filteredExpenseCategories | async"
			            [value]="expenseCategory">
				<span>{{ expenseCategory.name }}</span>
			</mat-option>
		</mat-autocomplete>

		<footer id="footer_wrapper"
		        class="footer_wrapper"></footer>

	</mat-sidenav-container>


	<!-- Think of moving modal to its own separate Control -->
	<!-- Modal Basic ===========================================================-->

	<div class="modal fade"
	     bsModal
	     #updateTransactionModal="bs-modal"
	     tabindex="-1"
	     role="dialog"
	     aria-labelledby="mySmallModalLabel"
	     aria-hidden="true">
		<div class="modal-dialog modal-md">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title float-left">Update Expense Category</h4>
					<button type="button"
					        class="close pull-right"
					        aria-label="Close"
					        (click)="updateTransactionModal.hide()">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="container">
						<div class="row m-b-30">
							<div class="col-xs-12">
								<h3>Update</h3>
								<input matInput
								       placeholder="Expense Category"
								       class="form-control"
								       [matAutocomplete]="tdAutoCategory"
								       [formControl]="modalExpenseCategoryControl">

							</div>
						</div>
						<!-- Auto Complete Expense Categories -->
						<mat-autocomplete #tdAutoCategory="matAutocomplete"
						                  [displayWith]="displayFn">
							<mat-option *ngFor="let expenseCategory of filteredModalExpenseCategories | async"
							            [value]="expenseCategory">
								<span>{{ expenseCategory.name }}</span>
							</mat-option>
						</mat-autocomplete>

					</div>

				</div>
				<div class="modal-footer">
					<button type="button"
					        class="btn btn-default btn-flat"
					        (click)="updateTransactionModal.hide()">Cancel</button>
					<button type="button"
					        class="btn btn-accent">Ok</button>
				</div>
			</div>
		</div>
	</div>
</div>