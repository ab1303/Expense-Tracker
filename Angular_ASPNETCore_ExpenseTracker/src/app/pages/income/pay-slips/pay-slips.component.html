<div id="content_wrapper"
     class="fullWidth2-wrapper rightSidenav2-wrapper">
  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav-content>
      <div class="content">
        <div class="header-wrapper header-sm">
          <header>
            <h1>Salary Slips</h1>

            <ul class="actions icons top-right">
              <li>
                <a href="javascript:void(0)"
                   (click)="rightSidenav2.toggle()">
                  <i class="zmdi zmdi-search"></i>
                </a>
              </li>
            </ul>
          </header>
        </div>
        <div class="content-body">
          <div class="card card-datatable">
            <header class="card-header p-30">
              <h2 class="card-title">Pay Slips</h2>
              <ul class="actions icons top-right">
                <li class="dropdown"
                    dropdown>
                  <a href="javascript:void(0)"
                     dropdownToggle>
                    <i class="zmdi zmdi-more-vert"></i>
                  </a>
                  <ul class="dropdown-menu btn-primary dropdown-menu-right">
                    <li>
                      <button class="btn btn-info btn-block"
                              [routerLink]="['/income/payslips/add', {mode:'add'}]">Add Salary Slip</button>
                    </li>
                  </ul>
                </li>
              </ul>
            </header>
            <div class="card-block p-0">
              <ngx-datatable #table
                             style="width: 100%"
                             class="material"
                             [rows]="paySlips"
                             [columnMode]="'force'"
                             [headerHeight]="50"
                             [footerHeight]="100"
                             [rowHeight]="'auto'"
                             [limit]="page.size"
                             [selectionType]="'checkbox'"
                             [externalPaging]="true"
                             [count]="page.totalElements"
                             [offset]="page.pageNumber"
                             [limit]="page.size"
                             (page)='setPage($event)'
                             (select)='onSelect($event)'>

                <ngx-datatable-column name="Total Earnings">
                  <ng-template let-value="value"
                               ngx-datatable-cell-template>
                    {{value | currency:'USD':'symbol':'1.2-4'}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Net Pay">
                  <ng-template let-value="value"
                               ngx-datatable-cell-template>
                    {{value | currency:'USD':'symbol':'1.2-4'}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Super Annuation">
                  <ng-template let-value="value"
                               ngx-datatable-cell-template>
                    {{value | currency:'USD':'symbol':'1.2-4'}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="Frequency"></ngx-datatable-column>
                <ngx-datatable-column name="Start Date"
                                      prop="periodStart">
                  <ng-template let-value="value"
                               ngx-datatable-cell-template>
                    {{value | date: 'dd-MMM-yyyy'}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column name="End Date"
                                      prop="periodEnd">
                  <ng-template let-value="value"
                               ngx-datatable-cell-template>
                    {{value | date: 'dd-MMM-yyyy'}}
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-column>
                  <ng-template let-row="row"
                               ngx-datatable-cell-template>
                    <a href="javascript:void(0)"
                       attr.data-paySlipId="{{row.id}}"
                       [routerLink]="['/income/payslips/edit', {mode:'edit', id: row.id }]"
                       class="icon edit-paySlip">
                      <i class="zmdi zmdi-edit"></i>
                    </a>
                    <a href="javascript:void(0)"
                       (click)="deletePaySlip(row.id)"
                       class="icon delete-paySlip">
                      <i class="zmdi zmdi-delete"></i>
                    </a>
                  </ng-template>
                </ngx-datatable-column>
                <ngx-datatable-footer>
                  <ng-template ngx-datatable-footer-template
                               let-rowCount="rowCount"
                               let-pageSize="pageSize"
                               let-selectedCount="selectedCount"
                               let-curPage="curPage"
                               let-offset="offset">
                    <div style="padding: 5px 10px">
                      <div>
                        <strong>Total</strong>:
                      </div>
                      <hr style="width:100%" />
                      <div>
                        Earnings:
                        <strong>
                          {{summaryTotal('totalEarnings') | currency:'USD':'symbol':'1.2-4' }}
                        </strong> |
                        Net Pay:
                        <strong>
                          {{summaryTotal('netPay') | currency:'USD':'symbol':'1.2-4' }}
                        </strong> |
                        Super Annuation :
                        <strong>
                          {{summaryTotal('superAnnuation') |
                          currency:'USD':'symbol':'1.2-4' }}
                        </strong> |
                        Tax :
                        <strong>
                          {{summaryTotal('totalEarnings') - summaryTotal('netPay') |
                          currency:'USD':'symbol':'1.2-4' }}
                        </strong>
                      </div>
                    </div>
                  </ng-template>
                </ngx-datatable-footer>
              </ngx-datatable>

              <ng-template #amountTpl
                           let-column="column"
                           let-row="row"
                           let-value="value">
                {{value | currency:'USD':'symbol':'1.2-4'}}
              </ng-template>
              <ng-template #dateTpl
                           let-column="column">
                {{value | date: 'dd-MMM-yyyy'}}
              </ng-template>
              <ng-template #summaryTpl
                           let-column="column"
                           let-row="row"
                           let-value="value">
                <strong>{{summaryTotal(column.prop) | currency:'USD':'symbol':'1.2-4'}}</strong>
              </ng-template>
            </div>
          </div>
        </div>
      </div>
    </mat-sidenav-content>

    <footer id="footer_wrapper"
            class="footer_wrapper"></footer>
  </mat-sidenav-container>
</div>